(this["webpackJsonptitan-ui"]=this["webpackJsonptitan-ui"]||[]).push([[68],{144:function(e,t,a){},886:function(e,t,a){"use strict";a.r(t);var n=a(58),o=a(59),l=a(62),s=a(61),i=a(0),r=a.n(i),c=a(10),u=a(22),p=a(21),d=a(79),h=a(25),m=a.n(h),g=(a(73),a(26),a(144),r.a.lazy((function(){return Promise.all([a.e(1),a.e(2),a.e(3),a.e(4),a.e(7)]).then(a.bind(null,158))}))),f=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={columns:[],data:[],columnDefs:[{headerName:"ID",field:"id",width:"10%"},{headerName:"Hora",field:"time",width:"15%"},{headerName:"Proveedor",field:"idSupplier",width:"30%"},{headerName:"Pagado",field:"paid",width:"15%"},{headerName:"Total",field:"total",width:"15%"},{headerName:"Moneda",field:"idCurrency",width:"15%"}],loadPageFunction:null,length:5,windowHeight:document.body.clientHeight},e.setLoadPageFunction=function(){switch(console.log("SALE TABLE RENDERING: ",e.props.filterModel),e.props.filterModel){case"appUser":e.setState({loadPageFunction:e.loadPurchaseTablePageByIdAppUser});break;case"company":e.setState({loadPageFunction:e.loadPurchaseTablePageByIdCompany});break;case"client":e.setState({loadPageFunction:e.loadPurchaseTablePageByIdClient});break;default:console.log("No model given for purchase table")}},e.setLength=function(){switch(e.props.filterModel){case"appUser":e.setState({length:e.props.appUserPurchaseCount});break;case"company":break;case"client":e.setState({length:e.props.clientPurchaseCount});break;default:console.log("No model given for purchase table")}},e.onRowClick=function(t){console.log("Clicked row: ",t),e.props.history.push({pathname:"PurchaseProfile",search:"?idPurchase="+t.id})},e.PurchaseTable=function(){return console.log("About to render lazy table:"),e.state.length&&e.state.loadPageFunction?r.a.createElement(g,{idCompany:e.props.idCompany,idAppUser:e.props.idAppUser,idClient:e.props.idClient,idShift:e.props.idShift,columnDefs:e.state.columnDefs,loadTablePage:e.state.loadPageFunction,length:10,onRowClick:e.onRowClick,title:"Compras",pageSize:Math.floor(e.state.windowHeight/50)}):null},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){this.setLoadPageFunction(),this.setLength()}},{key:"loadPurchaseTablePageByIdClient",value:function(e){var t={"Content-Type":"application/json; charset=utf-8",Authorization:Object(p.b)("JWT")},a=this,n={idClient:this.props.idClient,page:e,pageSize:this.props.pageSize},o=Object(p.k)(d.a+"/Purchase/findByIdClientPaginated",n);fetch(o,{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(t){t.success&&a.setState((function(a){for(var n=0;n<t.data.content.length;n++)t.data.content[n].time=m()(t.data.content[n].time,"YYYY-MM-DD[T]HH:mm:ss").format("HH:mm:ss");return a.pageData[e]=t.data.content,console.log("New state:",a),a}))})).catch((function(e){console.log(e)}))}},{key:"loadPurchaseTablePageByIdCompany",value:function(e){console.log("Loading company purchases: ");var t={"Content-Type":"application/json; charset=utf-8",Authorization:Object(p.b)("JWT")},a=this,n={idCompany:this.props.idCompany,page:e,pageSize:this.props.pageSize},o=Object(p.k)(d.a+"/Purchase/findByIdCompanyPaginated",n);fetch(o,{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(t){t.success&&a.setState((function(a){for(var n=0;n<t.data.content.length;n++)t.data.content[n].time=m()(t.data.content[n].time,"YYYY-MM-DD[T]HH:mm:ss").format("HH:mm:ss");return a.pageData[e]=t.data.content,console.log("New state:",a),a}))})).catch((function(e){console.log(e)}))}},{key:"loadPurchaseTablePageByIdAppUser",value:function(e){var t={"Content-Type":"application/json; charset=utf-8",Authorization:Object(p.b)("JWT")},a=this,n={idAppUser:this.props.idAppUser,page:e,pageSize:this.props.pageSize},o=Object(p.k)(d.a+"/Purchase/findByIdAppUserPaginated",n);fetch(o,{method:"GET",headers:t}).then((function(e){return e.json()})).then((function(t){t.success&&a.setState((function(a){for(var n=0;n<t.data.content.length;n++)t.data.content[n].time=m()(t.data.content[n].time,"YYYY-MM-DD[T]HH:mm:ss").format("HH:mm:ss");return a.pageData[e]=t.data.content,console.log("New state:",a),a}))})).catch((function(e){console.log(e)}))}},{key:"render",value:function(){return console.log("length : ",this.state.length),console.log("loadpagefunc: ",this.state.loadPageFunction),r.a.createElement("div",null,this.PurchaseTable())}}]),a}(i.Component),y=Object(c.g)(Object(u.b)((function(e,t){var a=e.appUserReducer,n=e.moduleReducer,o=e.companyReducer,l=e.clientReducer,s=a.idCompany,i=n.modules,r=t.purchaseCount,c=o.purchaseCount;return console.log("Clien hashmap: ",l.clientHashMap),console.log("ownprops: ",t),console.log("AppUser reducer:",a),{idCompany:s,modules:i,appUserPurchaseCount:r,companyPurchaseCount:c}}))(f)),b=a(509),P=a(510),C=(r.a.lazy((function(){return a.e(70).then(a.bind(null,292))})),r.a.lazy((function(){return Promise.all([a.e(0),a.e(8)]).then(a.bind(null,155))}))),v=function(e){Object(l.a)(a,e);var t=Object(s.a)(a);function a(){var e;Object(n.a)(this,a);for(var o=arguments.length,l=new Array(o),s=0;s<o;s++)l[s]=arguments[s];return(e=t.call.apply(t,[this].concat(l))).state={},e.loadItemButton=function(){return e.props.modules.Modules.Item.actions.Create?r.a.createElement(C,{onClick:e.goToPurchasemManager,type:"inverse",label:"Realizar Compra"}):null},e.goToPurchasemManager=function(){e.props.history.push("/PurchaseManager")},e.AvailablePurchaseTable=function(){return console.log("Modules: ",e.props.modules),e.props.modules.Modules.Sale.actions.ReadAll?(console.log("Displaying all company purchases"),r.a.createElement(y,{idCompany:e.props.idCompany,filterModel:"company",pageSize:20})):(console.log("Displaying sales of this user only"),r.a.createElement(y,{idAppUser:e.props.idAppUser,filterModel:"appUser",pageSize:20,size:"small"}))},e}return Object(o.a)(a,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(b.a,{type:"flex",justify:"end",align:"middle"},r.a.createElement(P.a,{span:24},this.AvailablePurchaseTable())),r.a.createElement("br",null),r.a.createElement(b.a,{type:"flex",justify:"end",align:"middle"},r.a.createElement(P.a,{span:6,style:{textAlign:"end"}},this.loadItemButton())))}}]),a}(i.Component);t.default=Object(c.g)(Object(u.b)((function(e){var t=e.appUserReducer,a=e.moduleReducer,n=t.idCompany,o=t.idAppUser,l=a.modules;return console.log("idCompany for tableUser: ",n),{idCompany:n,idAppUser:o,modules:l}}))(v))}}]);
//# sourceMappingURL=68.9e95690b.chunk.js.map