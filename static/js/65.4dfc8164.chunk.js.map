{"version":3,"sources":["components/TransformItemModal/TransformItemModal.js"],"names":["TButton","React","lazy","Title","TransformItemModal","state","warehouses","warehouseOriginCheckboxes","warehouseDestinyRadioButtons","measures","measureOriginCheckboxes","measureDestinyRadioButtons","measuresAgregattedCurrentStock","measuresTransformStock","measuresTransformStockDanger","measuresDestinyTransformStock","transformIsValid","transformService","destinyMeasure","originWarehouse","destinyWarehouse","itemQuantities","console","log","props","item","headers","getCookie","i","length","warehouseStock","idWarehouse","push","idMeasure","nameIdMeasureHashMap","quantity","parseFloat","body","JSON","stringify","idItem","id","url","BACKEND_URL","fetch","method","then","response","json","success","alert","message","catch","error","setWarehouses","setState","prevState","warehouseName","measure","stock","Object","prototype","hasOwnProperty","call","transform","conversion","originMeasure","originQuantity","split","posOrigin","posDestiny","getMeasureName","start","Math","min","end","max","equivalence","getMeasureQuantity","validateForm","isDestinyMeasureSelected","isDestinyWarehouseSelected","originWarehouseList","key","span","checked","onChange","e","checkOriginWarehouse","originMeasureList","danger","name","className","value","placeholder","onChangeMeasuresTransformStock","destinyWarehouseList","checkDestinyWarehouse","destinyMeasureList","checkDestinyMeasure","toFixed","prevProps","snapshot","this","idx","j","target","isNumber","charAt","isOpen","onAfterOpen","onRequestClose","onClose","style","content","top","left","right","bottom","marginRight","width","height","contentLabel","ariaHideApp","size","label","code","justify","align","type","onClick","disabled","Component","connect","appUserReducer","warehouseReducer","measureReducer","idCompany","nameIdWarehouseHashMap"],"mappings":"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","file":"static/js/65.4dfc8164.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport \"../../redux/reducers/appUserReducer\";\nimport Modal from 'react-modal';\nimport \"./_TransformItemModal.scss\";\nimport {Col, Row, Checkbox, Radio, Input} from \"antd\";\nimport { getMeasureName, getMeasureQuantity, isLetter, isNumber} from \"../../utils.js\";\nimport {getCookie, withParams} from \"../../utils\";\nimport {BACKEND_URL} from \"../../constants\";\nimport {connect} from \"react-redux\";\n\nconst TButton = React.lazy(() => import(\"../TButton/TButton\"));\nconst Title = React.lazy(() => import(\"../TTitle/TTitle\"));\n\nclass TransformItemModal extends Component {\n\n\tstate = {\n\t\twarehouses: [],\n\t\twarehouseOriginCheckboxes: [],\n\t\twarehouseDestinyRadioButtons: [],\n\t\tmeasures: [],\n\t\tmeasureOriginCheckboxes: [],\n\t\tmeasureDestinyRadioButtons: [],\n\t\tmeasuresAgregattedCurrentStock: [],\n\t\tmeasuresTransformStock: [],\n\t\tmeasuresTransformStockDanger: [],\n\t\tmeasuresDestinyTransformStock: [],\n\t\ttransformIsValid: false\n\t};\n\n\tcomponentDidUpdate(prevProps, prevState, snapshot) {\n\t\tif (this.props.item !== prevProps.item) {\n\t\t\tthis.setWarehouses();\n\t\t}\n\t}\n\n\ttransformService = () => {\n\t\tlet me = this;\n\t\tlet destinyMeasure = \"\";\n\t\tlet originWarehouse = \"\";\n\t\tlet destinyWarehouse = \"\";\n\t\tlet itemQuantities = [];\n\t\tlet idItem = \"\";\n\t\tconsole.log('ITEM DATA', this.props.item);\n\n\t\tlet headers={\n\t\t\t\"Authorization\":getCookie(\"JWT\"),\n\t\t\t\"Content-Type\": \"application/json; charset=utf-8\"\n\t\t};\n\n\t\tfor(let i = 0; i < this.state.warehouseOriginCheckboxes.length; i++) {\n\t\t\tif(this.state.warehouseOriginCheckboxes[i]) {\n\t\t\t\toriginWarehouse = this.props.item.warehouseStock[i].idWarehouse;\n\t\t\t}\n\t\t\tif(this.state.warehouseDestinyRadioButtons[i]) {\n\t\t\t\tdestinyWarehouse = this.props.item.warehouseStock[i].idWarehouse;\n\t\t\t}\n\t\t}\n\t\tconsole.log('Props of componentn: ',this.props);\n\n\t\tfor(let i = 0; i < this.state.measures.length; i++) {\n\t\t\tif(this.state.measuresTransformStock[i]) {\n\t\t\t\titemQuantities.push({\n\t\t\t\t\tidMeasure: this.props.nameIdMeasureHashMap[this.state.measures[i]],\n\t\t\t\t\tquantity: parseFloat(this.state.measuresTransformStock[i])\n\t\t\t\t});\n\t\t\t}\n\t\t\tconsole.log('i',this.state.measureDestinyRadioButtons[i]);\n\t\t\tif(this.state.measureDestinyRadioButtons[i]) {\n\t\t\t\tconsole.log('name: ',this.state.measures[i],\" and id: \",this.props.nameIdMeasureHashMap[this.state.measures[i]]);\n\t\t\t\tdestinyMeasure = this.props.nameIdMeasureHashMap[this.state.measures[i]];\n\t\t\t}\n\n\t\t}\n\n\t\tlet body =JSON.stringify({\n\t\t\tdestinyMeasure : destinyMeasure,\n\t\t    originWarehouse : originWarehouse,\n\t\t\tdestinyWarehouse: destinyWarehouse,\n\t\t\titemQuantities : itemQuantities,\n\t\t\tidItem : this.props.item.id\n\t\t});\n\n\t\tlet url = BACKEND_URL+\"/WarehouseItemQuantity/transform\";\n\t\tfetch(url, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: body,\n\t\t\theaders: headers\n\t\t}).then(response => response.json())\n\t\t\t .then(function (response) {\n\t\t\t\t //console.log(\"me in getpage fetch is \",me);\n\t\t\t\t if(response.success){\n\t\t\t\t\t alert(\"El archivo se ha subido correctamente\")\n\t\t\t\t }else{\n\t\t\t\t\t alert(\"Ha habido un error: \" + response.message);\n\t\t\t\t }\n\t\t\t }).catch(function (error) {\n\t\t\talert(\"Ha habido un error: \" + error);\n\t\t});\n\t};\n\n\tsetWarehouses = () => {\n\t\tif(this.props.item['warehouseStock']){\n\t\t\tthis.setState(prevState => {\n\t\t\t\tlet warehouses = [];\n\t\t\t\tlet measures = [];\n\t\t\t\tlet warehouseOriginCheckboxes = [];\n\t\t\t\tfor(let i = 0; i < this.props.item['warehouseStock'].length; i++) {\n\t\t\t\t\twarehouses.push(this.props.item.warehouseStock[i].warehouseName);\n\t\t\t\t\twarehouseOriginCheckboxes.push(false);\n\t\t\t\t\tprevState.warehouseDestinyRadioButtons.push(false);\n\t\t\t\t}\n\t\t\t\tfor (let measure in this.props.item['warehouseStock'][0].stock) {\n\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(this.props.item['warehouseStock'][0].stock, measure)) {\n\t\t\t\t\t\tmeasures.push(measure);\n\t\t\t\t\t\tprevState.measureDestinyRadioButtons.push(false);\n\t\t\t\t\t\tprevState.measuresAgregattedCurrentStock.push(0);\n\t\t\t\t\t\tprevState.measuresTransformStock.push(\"\");\n\t\t\t\t\t\tprevState.measuresTransformStockDanger.push(false);\n\t\t\t\t\t\tprevState.measuresDestinyTransformStock.push(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tprevState.warehouses = warehouses;\n\t\t\t\tprevState.warehouseOriginCheckboxes = warehouseOriginCheckboxes;\n\t\t\t\tprevState.measures = measures;\n\t\t\t\treturn prevState;\n\t\t\t});\n\t\t}\n\t};\n\n\t// Function to transform an item measure to another\n\ttransform = (conversion, originMeasure, originQuantity, destinyMeasure) => {\n\t\tconsole.log('Conversion: ',conversion);\n\t\tconsole.log('OriginMeasure: ',originMeasure);\n\t\tconsole.log('OriginQuantity',originQuantity);\n\t\tconsole.log('DestinyMeasure:',destinyMeasure);\n\t\tlet res = 0;\n\t\tlet measures = conversion.split('x');\n\t\tlet posOrigin = 0;\n\t\tlet posDestiny = 0;\n\t\tfor(let i = 0; i < measures.length; i++) {\n\t\t\tif(originMeasure === getMeasureName(measures[i])) {\n\t\t\t\tposOrigin = i;\n\t\t\t}\n\t\t\tif(destinyMeasure === getMeasureName(measures[i])) {\n\t\t\t\tposDestiny = i;\n\t\t\t}\n\t\t}\n\t\tlet start = Math.min(posOrigin,posDestiny);\n\t\tlet end = Math.max(posOrigin,posDestiny);\n\t\tlet equivalence = 1;\n\t\tfor(let i = start; i < end; i++) {\n\t\t\tequivalence *= getMeasureQuantity(measures[i]);\n\t\t}\n\t\tif(posOrigin < posDestiny) {\n\t\t\t//Means we want to transform from an small measure to a big one\n\t\t\tres = originQuantity / equivalence;\n\t\t} else {\n\t\t\tres = originQuantity * equivalence;\n\t\t}\n\t\treturn res;\n\t};\n\n\tcheckOriginWarehouse(e,idx) {\n\t\tthis.setState(prevState => {\n\t\t\tprevState.warehouseOriginCheckboxes[idx] = !prevState.warehouseOriginCheckboxes[idx];\n\t\t\t// Empty all aggregated values in measures\n\t\t\tfor(let i = 0; i < prevState.measuresAgregattedCurrentStock.length; i++) {\n\t\t\t\tprevState.measuresAgregattedCurrentStock[i] = 0;\n\t\t\t}\n\t\t\tfor(let i = 0; i < this.props.item['warehouseStock'].length; i++) {\n\t\t\t\t// Check if warehouse if selected\n\t\t\t\tif(prevState.warehouseOriginCheckboxes[i] === true) {\n\t\t\t\t\tlet j = 0;\n\t\t\t\t\tfor (let measure in this.props.item['warehouseStock'][i].stock) {\n\t\t\t\t\t\tif (Object.prototype.hasOwnProperty.call(this.props.item['warehouseStock'][i].stock, measure)) {\n\t\t\t\t\t\t\tprevState.measuresAgregattedCurrentStock[j] += this.props.item['warehouseStock'][i].stock[measure];\n\t\t\t\t\t\t}\n\t\t\t\t\t\tj++;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn prevState;\n\t\t});\n\t\tthis.validateForm();\n\t};\n\n\tvalidateForm = () => {\n\n\t\tlet transformIsValid = true;\n\t\tthis.setState(prevState => {\n\t\t\t//Validate if transform measures\n\t\t\tfor(let i = 0; i < prevState.measures.length; i++) {\n\t\t\t\tprevState.measuresTransformStockDanger[i] =\n\t\t\t\t\t parseFloat(prevState.measuresTransformStock[i]) > parseFloat(prevState.measuresAgregattedCurrentStock[i]);\n\t\t\t\ttransformIsValid = transformIsValid && !prevState.measuresTransformStockDanger[i];\n\t\t\t}\n\t\t\t//Validate if at least 1 measure and 1 warehouse are selected\n\t\t\tlet isDestinyMeasureSelected = false;\n\t\t\tlet isDestinyWarehouseSelected = false;\n\t\t\tfor(let i = 0; i < prevState.warehouseDestinyRadioButtons.length; i++) {\n\t\t\t\tisDestinyWarehouseSelected = prevState.warehouseDestinyRadioButtons[i] || isDestinyWarehouseSelected;\n\t\t\t}\n\n\t\t\tfor(let i = 0; i < prevState.measureDestinyRadioButtons.length; i++) {\n\t\t\t\tisDestinyMeasureSelected = prevState.measureDestinyRadioButtons[i] || isDestinyMeasureSelected;\n\n\t\t\t}\n\t\t\tconsole.log('Valid form: ',transformIsValid,\"-\",isDestinyMeasureSelected,\"-\",isDestinyWarehouseSelected);\n\t\t\tprevState.transformIsValid = transformIsValid && isDestinyMeasureSelected && isDestinyWarehouseSelected;\n\n\t\t\t//console.log('transformIsValid: ',prevState.transformIsValid);\n\t\t\treturn prevState;\n\t\t});\n\t};\n\n\tcheckOriginMeasure(e,idx) {\n\t\tthis.setState(prevState => {\n\t\t\tprevState.measureOriginCheckboxes[idx] = !prevState.measureOriginCheckboxes[idx];\n\t\t\treturn prevState;\n\t\t});\n\t};\n\n\tonChangeMeasuresTransformStock(e,idx) {\n\t\tlet value = e.target.value;\n\t\tthis.setState(prevState => {\n\t\t\tif(value.length === 0 || isNumber(value.charAt(value.length - 1))) {\n\t\t\t\tprevState.measuresTransformStock[idx] = value;\n\t\t\t}\n\t\t\t//Update destiny measures\n\t\t\tfor(let i = 0; i < prevState.measuresDestinyTransformStock.length; i++) {\n\t\t\t\tprevState.measuresDestinyTransformStock[i] =\n\t\t\t\t\t this.transform(\n\t\t\t\t\t \t this.props.item.conversion,\n\t\t\t\t\t\t  prevState.measures[idx],\n\t\t\t\t\t\t  prevState.measuresTransformStock[idx],\n\t\t\t\t\t\t  prevState.measures[i]\n\t\t\t\t\t\t  );\n\t\t\t}\n\t\t\treturn prevState;\n\t\t});\n\t\tthis.validateForm();\n\t};\n\n\tcheckDestinyWarehouse(e,idx) {\n\t\tthis.setState(prevState => {\n\t\t\tfor(let i = 0; i < prevState.warehouseDestinyRadioButtons.length; i++) {\n\t\t\t\tprevState.warehouseDestinyRadioButtons[i] = (idx === i);\n\t\t\t}\n\t\t\treturn prevState;\n\t\t});\n\t\tthis.validateForm();\n\t};\n\n\tcheckDestinyMeasure(e,idx) {\n\t\tthis.setState(prevState => {\n\t\t\tfor(let i = 0; i < prevState.measureDestinyRadioButtons.length; i++) {\n\t\t\t\tprevState.measureDestinyRadioButtons[i] = (idx === i);\n\t\t\t}\n\t\t\treturn prevState;\n\t\t});\n\t\tthis.validateForm();\n\t};\n\n\toriginWarehouseList = () => {\n\t\tlet warehouses = [];\n\t\tfor(let i = 0; i < this.state.warehouses.length; i++) {\n\t\t\twarehouses.push(\n\t\t\t\t <Row key={i}>\n\t\t\t\t\t <Col span={24}>\n\t\t\t\t\t\t <Checkbox\n\t\t\t\t\t\t\t  checked={this.state.warehouseOriginCheckboxes[i]}\n\t\t\t\t\t\t\t  onChange={(e) => this.checkOriginWarehouse(e,i)}\n\t\t\t\t\t\t >{this.state.warehouses[i]}\n\t\t\t\t\t\t </Checkbox>\n\t\t\t\t\t </Col>\n\t\t\t\t </Row>\n\t\t\t);\n\t\t}\n\t\treturn warehouses;\n\t};\n\n\toriginMeasureList = () => {\n\t\tlet measures = [];\n\t\tfor(let i = 0; i < this.state.measures.length; i++) {\n\t\t\tlet danger = this.state.measuresTransformStockDanger[i] ? \"danger\" : \"\";\n\t\t\tmeasures.push(\n\t\t\t\t <Row key={i}>\n\t\t\t\t\t <Col span={24}>\n\t\t\t\t\t\t {this.state.measures[i] + ' ' + this.state.measuresAgregattedCurrentStock[i]}\n\t\t\t\t\t\t <input\n\t\t\t\t\t\t\t  name={\"measureInput\"}\n\t\t\t\t\t\t\t  className={\"measureInput \"+danger}\n\t\t\t\t\t\t\t  value={this.state.measuresTransformStock[i]}\n\t\t\t\t\t\t\t  placeholder={\"0\"}\n\t\t\t\t\t\t\t  onChange={(e) => this.onChangeMeasuresTransformStock(e,i)}\n\t\t\t\t\t\t />\n\t\t\t\t\t </Col>\n\t\t\t\t </Row>\n\t\t\t);\n\t\t\t/*\n\t\t\tmeasures.push(\n\t\t\t\t <Row key={i}>\n\t\t\t\t\t <Col span={24}>\n\t\t\t\t\t\t <Checkbox\n\t\t\t\t\t\t\t  checked = {this.state.measureOriginCheckboxes[i]}\n\t\t\t\t\t\t\t  onChange = {(e) => this.checkOriginMeasure(e,i)}\n\t\t\t\t\t\t >\n\t\t\t\t\t\t\t {this.state.measures[i] + ' ' + this.state.measuresAgregattedCurrentStock[i]}\n\t\t\t\t\t\t\t <input\n\t\t\t\t\t\t\t\t  name={\"measureInput\"}\n\t\t\t\t\t\t\t\t  className={\"measureInput \"+danger}\n\t\t\t\t\t\t\t\t  value={this.state.measuresTransformStock[i]}\n\t\t\t\t\t\t\t\t  placeholder={\"0\"}\n\t\t\t\t\t\t\t\t  onChange={(e) => this.onChangeMeasuresTransformStock(e,i)}\n\t\t\t\t\t\t\t />\n\t\t\t\t\t\t </Checkbox>\n\t\t\t\t\t </Col>\n\t\t\t\t </Row>\n\t\t\t);\n\t\t\t */\n\t\t}\n\t\treturn measures;\n\t};\n\n\tdestinyWarehouseList = () => {\n\t\tlet warehouses = [];\n\t\tfor(let i = 0; i < this.state.warehouses.length; i++) {\n\t\t\tconsole.log('pushing: ',this.state.warehouses[i]);\n\t\t\twarehouses.push(\n\t\t\t\t <Row key={i}>\n\t\t\t\t\t <Col span={24}>\n\t\t\t\t\t\t <Radio\n\t\t\t\t\t\t\t  checked={this.state.warehouseDestinyRadioButtons[i]}\n\t\t\t\t\t\t\t  onChange={(e) => this.checkDestinyWarehouse(e,i)}>{this.state.warehouses[i]}\n\t\t\t\t\t\t </Radio>\n\t\t\t\t\t </Col>\n\t\t\t\t </Row>\n\t\t\t);\n\t\t}\n\t\treturn warehouses;\n\t};\n\n\tdestinyMeasureList = () => {\n\t\tlet measures = [];\n\t\tfor(let i = 0; i < this.state.measures.length; i++) {\n\t\t\tmeasures.push(\n\t\t\t\t <Row key={i}>\n\t\t\t\t\t <Col span={24}>\n\t\t\t\t\t\t <Radio\n\t\t\t\t\t\t\t  checked={this.state.measureDestinyRadioButtons[i]}\n\t\t\t\t\t\t\t  onChange={(e) => this.checkDestinyMeasure(e,i)}>\n\t\t\t\t\t\t\t {this.state.measures[i] + ' ' + parseFloat(this.state.measuresDestinyTransformStock[i]).toFixed(3)}\n\t\t\t\t\t\t </Radio>\n\t\t\t\t\t </Col>\n\t\t\t\t </Row>\n\t\t\t);\n\t\t}\n\t\treturn measures;\n\t};\n\n\trender() {\n\t\tlet me = this;\n\t\tfunction afterOpenModal() {\n\t\t\t// references are now sync'd and can be accessed.\n\t\t\tconsole.log(\"AFTER MODAL IS OPEN\");\n\t\t}\n\n\t\tconst customStyles = {\n\t\t\tcontent : {\n\t\t\t\ttop                   : '50%',\n\t\t\t\tleft                  : '50%',\n\t\t\t\tright                 : 'auto',\n\t\t\t\tbottom                : 'auto',\n\t\t\t\tmarginRight           : '-50%',\n\t\t\t\ttransform             : 'translate(-50%, -50%)',\n\t\t\t\twidth                 : '500px',\n\t\t\t\theight                : '520px'\n\t\t\t}\n\t\t};\n\t\treturn (\n\t\t\t <Modal\n\t\t\t\t  isOpen={this.props.isOpen}\n\t\t\t\t  onAfterOpen={afterOpenModal}\n\t\t\t\t  onRequestClose={this.props.onClose}\n\t\t\t\t  style={customStyles}\n\t\t\t\t  contentLabel=\"Noticiación\"\n\t\t\t\t  ariaHideApp={false}\n\t\t\t >\n\t\t\t\t <Title\n\t\t\t\t\t  size={'big'}\n\t\t\t\t\t  label={'Transformar ' + this.props.item.code}\n\t\t\t\t />\n\t\t\t\t <Row justify={\"space-between\"}>\n\t\t\t\t\t <Col span={11}>\n\t\t\t\t\t\t <Row>\n\t\t\t\t\t\t\t <Title\n\t\t\t\t\t\t\t\t  size={'medium'}\n\t\t\t\t\t\t\t\t  label={'Origen'}\n\t\t\t\t\t\t\t />\n\t\t\t\t\t\t </Row>\n\t\t\t\t\t\t <Row>\n\t\t\t\t\t\t\t <Title\n\t\t\t\t\t\t\t\t  size={'small'}\n\t\t\t\t\t\t\t\t  label={'Almacenes'}\n\t\t\t\t\t\t\t />\n\t\t\t\t\t\t\t <Col span={24}>\n\t\t\t\t\t\t\t\t {this.originWarehouseList()}\n\t\t\t\t\t\t\t </Col>\n\t\t\t\t\t\t </Row>\n\t\t\t\t\t\t <br/>\n\t\t\t\t\t\t <Row>\n\t\t\t\t\t\t\t <Title\n\t\t\t\t\t\t\t\t  size={'small'}\n\t\t\t\t\t\t\t\t  label={'Métrica'}\n\t\t\t\t\t\t\t />\n\t\t\t\t\t\t\t <Col span={24}>\n\t\t\t\t\t\t\t\t {this.originMeasureList()}\n\t\t\t\t\t\t\t </Col>\n\t\t\t\t\t\t </Row>\n\t\t\t\t\t </Col>\n\t\t\t\t\t <Col span={11}>\n\t\t\t\t\t\t <Row>\n\t\t\t\t\t\t\t <Title\n\t\t\t\t\t\t\t\t  size={'medium'}\n\t\t\t\t\t\t\t\t  label={'Destino'}\n\t\t\t\t\t\t\t />\n\t\t\t\t\t\t </Row>\n\t\t\t\t\t\t <Row>\n\t\t\t\t\t\t\t <Title\n\t\t\t\t\t\t\t\t  size={'small'}\n\t\t\t\t\t\t\t\t  label={'Almacenes'}\n\t\t\t\t\t\t\t />\n\t\t\t\t\t\t\t <Col span={24}>\n\t\t\t\t\t\t\t\t {this.destinyWarehouseList()}\n\t\t\t\t\t\t\t </Col>\n\t\t\t\t\t\t </Row>\n\t\t\t\t\t\t <br/>\n\t\t\t\t\t\t <Row>\n\t\t\t\t\t\t\t <Title\n\t\t\t\t\t\t\t\t  size={'small'}\n\t\t\t\t\t\t\t\t  label={'Métrica'}\n\t\t\t\t\t\t\t />\n\t\t\t\t\t\t\t <Col span={24}>\n\t\t\t\t\t\t\t\t {this.destinyMeasureList()}\n\t\t\t\t\t\t\t </Col>\n\t\t\t\t\t\t </Row>\n\t\t\t\t\t </Col>\n\t\t\t\t </Row>\n\t\t\t\t <br/>\n\t\t\t\t <Row justify=\"space-between\" align=\"bottom\">\n\t\t\t\t\t <Col span={11}>\n\t\t\t\t\t\t <TButton\n\t\t\t\t\t\t\t  type={\"inverse\"}\n\t\t\t\t\t\t\t  onClick={this.props.onClose}\n\t\t\t\t\t\t\t  label={\"CANCELAR\"}\n\t\t\t\t\t\t\t  size={\"expanded\"}\n\t\t\t\t\t\t />\n\t\t\t\t\t </Col>\n\t\t\t\t\t <Col span={11}>\n\t\t\t\t\t\t <TButton\n\t\t\t\t\t\t\t  disabled={!this.state.transformIsValid}\n\t\t\t\t\t\t\t  type={\"inverse\"}\n\t\t\t\t\t\t\t  onClick={this.transformService}\n\t\t\t\t\t\t\t  label={\"TRANSFORMAR\"}\n\t\t\t\t\t\t\t  size={\"expanded\"}\n\t\t\t\t\t\t />\n\t\t\t\t\t </Col>\n\t\t\t\t </Row>\n\t\t\t </Modal>\n\t\t);\n\t}\n}\nconst mapStateToProps = state => {\n\tconst { appUserReducer, warehouseReducer, measureReducer } = state;\n\tconst { idCompany } = appUserReducer;\n\tconst { nameIdMeasureHashMap } = measureReducer;\n\tconst { nameIdWarehouseHashMap } = warehouseReducer;\n\treturn {idCompany, nameIdWarehouseHashMap, nameIdMeasureHashMap};\n};\nexport default connect(mapStateToProps)(TransformItemModal);\n"],"sourceRoot":""}