{"version":3,"sources":["components/AppUserTable/AppUserTable.js"],"names":["PaginatedLazyTable","React","lazy","AppUserTable","state","columns","data","columnDefs","headerName","field","width","windowHeight","document","body","clientHeight","pageSize","onRowClick","record","console","log","props","history","push","pathname","search","id","page","headers","Authorization","getCookie","me","this","params","idCompany","url","withParams","constants","fetch","method","then","response","json","success","setState","prevState","pageData","content","catch","error","Math","floor","loadTablePage","loadClientTablePage","length","clientCount","title","Component","withRouter","connect","appUserReducer","companyReducer"],"mappings":"wMASMA,G,aAAoBC,IAAMC,MAAK,kBAAM,6EAErCC,E,4MAEFC,MAAM,CACFC,QAAS,GACTC,KAAM,GACNC,WAAY,CACR,CAACC,WAAY,KAAMC,MAAO,KAAMC,MAAO,OACvC,CAACF,WAAY,SAAUC,MAAO,YAAaC,MAAO,OAClD,CAACF,WAAY,QAASC,MAAO,QAASC,MAAO,OAC7C,CAACF,WAAY,OAAQC,MAAO,OAAQC,MAAO,QAE/CC,aAAcC,SAASC,KAAKC,aAC/BC,SAAU,I,EAkCXC,WAAa,SAAAC,GAETC,QAAQC,IAAI,gBAAgBF,GAC5B,EAAKG,MAAMC,QAAQC,KAAK,CACpBC,SAAU,iBACVC,OAAQ,cAAgBP,EAAOQ,M,kEApCnBC,GAChBR,QAAQC,IAAI,iBAAiBO,GAC7B,IAAMC,EAAU,CACZ,eAAgB,kCAChBC,cAAeC,YAAU,QAEzBC,EAAKC,KACLC,EAAS,CACTC,UAAWF,KAAKX,MAAMa,UACtBP,KAAMA,EACNX,SAAUe,EAAGV,MAAML,UAEjBmB,EAAMC,YAAWC,IAAwB,oCAAqCJ,GACpFK,MAAMH,EAAK,CACPI,OAAQ,MACRX,QAASA,IACVY,MAAK,SAAAC,GAAQ,OAAIA,EAASC,UACvBF,MAAK,SAAUC,GAETA,EAASE,SAERZ,EAAGa,UAAU,SAACC,GAEV,OADAA,EAAUC,SAASnB,GAAMc,EAASlC,KAAKwC,QAChCF,QAGhBG,OAAM,SAAUC,GACpB9B,QAAQC,IAAI6B,Q,+BAgBhB,OAFA9B,QAAQC,IAAI,UAAUY,KAAKX,OAC3BF,QAAQC,IAAI,mCAAmC8B,KAAKC,MAAMnB,KAAK3B,MAAMO,aAAa,MAE7E,6BACI,kBAACX,EAAD,CACKiC,UAAWF,KAAKX,MAAMa,UACtB1B,WAAYwB,KAAK3B,MAAMG,WACvB4C,cAAepB,KAAKqB,oBACpBC,OAAQtB,KAAKX,MAAMkC,YACnBtC,WAAYe,KAAKf,WACjBuC,MAAO,WACPxC,SAAUgB,KAAK3B,MAAMW,gB,GAnEhByC,aAkFZC,sBAAWC,aARF,SAAAtD,GAAU,IACtBuD,EAAmCvD,EAAnCuD,eACA1B,GADmC7B,EAAnBwD,eACFD,EAAd1B,WACAqB,EAAgB,GAAhBA,YAER,OADApC,QAAQC,IAAI,iBAAiBmC,GACtB,CAACrB,YAAWqB,iBAGGI,CAAyBvD,K","file":"static/js/56.6da661ff.chunk.js","sourcesContent":["import React, { Component } from \"react\";\nimport { withRouter } from \"react-router-dom\";\nimport { Row, Col, Button } from \"antd\";\nimport { getCookie, withParams} from \"../../utils.js\";\nimport * as constants from \"../../constants\"\nimport {connect} from \"react-redux\";\nimport \"antd/dist/antd.css\";\nimport \"./_AppUserTable.scss\";\n\nconst PaginatedLazyTable= React.lazy(() => import(\"../../components/PaginatedLazyTable/PaginatedLazyTable\"));\n\nclass AppUserTable extends Component {\n    // TODO Add Date of last sale to table\n    state={\n        columns: [],\n        data: [],\n        columnDefs: [\n            {headerName: \"ID\", field: \"id\", width: \"10%\"},\n            {headerName: \"Medium\", field: \"firstName\", width: \"50%\"},\n            {headerName: \"Email\", field: \"email\", width: \"20%\"},\n            {headerName: \"Role\", field: \"role\", width: \"20%\"}\n        ],\n        windowHeight: document.body.clientHeight,\n\t    pageSize: 11\n    };\n\n    loadClientTablePage(page) {\n        console.log(\"Loading page: \",page);\n        const headers = {\n            \"Content-Type\": \"application/json; charset=utf-8\",\n            Authorization: getCookie(\"JWT\")\n        };\n        let me = this;\n        let params = {\n            idCompany: this.props.idCompany,\n            page: page,\n            pageSize: me.props.pageSize\n        };\n        const url = withParams(constants.BACKEND_URL + \"/AppUser/findByIdCompanyPaginated\", params);\n        fetch(url, {\n            method: \"GET\",\n            headers: headers\n        }).then(response => response.json())\n             .then(function (response) {\n                 //console.log(\"me in getpage fetch is \",me);\n                 if(response.success){\n                     //console.log(\"Page data received: \",response);\n                     me.setState ((prevState) =>{\n                         prevState.pageData[page]=response.data.content;\n                         return prevState;\n                     });\n                 }\n             }).catch(function (error) {\n            console.log(error);\n        });\n    };\n\n    onRowClick = record => {\n        //const idSale = record.id;\n        console.log(\"Clicked row: \",record);\n        this.props.history.push({\n            pathname: \"AppUserProfile\",\n            search: \"?idAppUser=\" + record.id\n        })\n    };\n\n    render() {\n        console.log(\"Props: \",this.props);\n        console.log(\"Number of rows in client table: \",Math.floor(this.state.windowHeight/100));\n        return (\n             <div>\n                 <PaginatedLazyTable\n                      idCompany={this.props.idCompany}\n                      columnDefs={this.state.columnDefs}\n                      loadTablePage={this.loadClientTablePage}\n                      length={this.props.clientCount}\n                      onRowClick={this.onRowClick}\n                      title={\"Usuarios\"}\n                      pageSize={this.state.pageSize}\n                 />\n             </div>\n        );\n    }\n}\n\nconst mapStateToProps = state => {\n    const { appUserReducer, companyReducer } = state;\n    const { idCompany } = appUserReducer;\n    const { clientCount } = 1;\n    console.log(\"Client count: \",clientCount);\n    return {idCompany, clientCount};\n};\n\nexport default withRouter(connect(mapStateToProps)(AppUserTable));\n"],"sourceRoot":""}